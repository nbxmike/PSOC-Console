<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PSOC Joystick: Source/USBJoystick.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PSOC Joystick
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_u_s_b_joystick_8c.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">USBJoystick.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Local inputs added to or outputs derived from the USB HID information.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;project.h&gt;</code><br />
<code>#include &quot;FreeRTOS.h&quot;</code><br />
<code>#include &quot;task.h&quot;</code><br />
<code>#include &quot;semphr.h&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &quot;<a class="el" href="globals_8h_source.html">globals.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_u_s_b_joystick_8h_source.html">USBJoystick.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_p_sx_host_8h_source.html">PSxHost.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_f_r_support_8h_source.html">FRSupport.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_u_s_b_host_8h_source.html">USBHost.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_local_peripherals_8h_source.html">LocalPeripherals.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1ece06d088ae80247c4b56f6e88e7595"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_s_b_joystick_8c.html#a1ece06d088ae80247c4b56f6e88e7595">USBCOMP_EP_4_ISR_ExitCallback</a> (void)</td></tr>
<tr class="memdesc:a1ece06d088ae80247c4b56f6e88e7595"><td class="mdescLeft">&#160;</td><td class="mdescRight">USBFS_EP_4_ISR_EntryCallback ISR hook for Joystick.  <a href="#a1ece06d088ae80247c4b56f6e88e7595">More...</a><br /></td></tr>
<tr class="separator:a1ece06d088ae80247c4b56f6e88e7595"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f17dbc784d7de1b5fd2b3ecd0ac1c05"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_s_b_joystick_8c.html#a4f17dbc784d7de1b5fd2b3ecd0ac1c05">USBCOMP_EP_5_ISR_ExitCallback</a> (void)</td></tr>
<tr class="separator:a4f17dbc784d7de1b5fd2b3ecd0ac1c05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad106cbebddf751373ac5880435b1dcd5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_s_b_joystick_8c.html#ad106cbebddf751373ac5880435b1dcd5">USBJoyClearBuffers</a> (void)</td></tr>
<tr class="memdesc:ad106cbebddf751373ac5880435b1dcd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes USB HID buffers and create FreeRTOS task.  <a href="#ad106cbebddf751373ac5880435b1dcd5">More...</a><br /></td></tr>
<tr class="separator:ad106cbebddf751373ac5880435b1dcd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a24ff28204c405ea042a79964b8fa4e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_s_b_joystick_8c.html#a3a24ff28204c405ea042a79964b8fa4e">USBJoyInit</a> (void)</td></tr>
<tr class="memdesc:a3a24ff28204c405ea042a79964b8fa4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes USB HID buffers and create FreeRTOS task.  <a href="#a3a24ff28204c405ea042a79964b8fa4e">More...</a><br /></td></tr>
<tr class="separator:a3a24ff28204c405ea042a79964b8fa4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5fe78facf2cbf49f7da99dc2ea8bfed"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_s_b_joystick_8c.html#ac5fe78facf2cbf49f7da99dc2ea8bfed">UsbJoyCheck</a> (void)</td></tr>
<tr class="memdesc:ac5fe78facf2cbf49f7da99dc2ea8bfed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes USB HID buffers and interface.  <a href="#ac5fe78facf2cbf49f7da99dc2ea8bfed">More...</a><br /></td></tr>
<tr class="separator:ac5fe78facf2cbf49f7da99dc2ea8bfed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af54ffd7c83b82074578a15ee2c9e9c31"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_s_b_joystick_8c.html#af54ffd7c83b82074578a15ee2c9e9c31">UsbJoySetOutputs</a> (void)</td></tr>
<tr class="separator:af54ffd7c83b82074578a15ee2c9e9c31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6bfb0eb1ff19828b6c306d455f90e09"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_s_b_joystick_8c.html#aa6bfb0eb1ff19828b6c306d455f90e09">UsbJoyTask</a> (void *arg)</td></tr>
<tr class="separator:aa6bfb0eb1ff19828b6c306d455f90e09"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Local inputs added to or outputs derived from the USB HID information. </p>
<dl class="section author"><dt>Author</dt><dd>Mike McCormack (nbxmike) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>8/OCT/2018 Creates the data transfered to the USB or extracts data from the USB host side. It will replace the PSx controller input into HID data. Also supports peripherals that are not part of a PlayStation controller that are attached to the PSOC. Examples could be configuration switches as inputs or LEDs as outputs. </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a1ece06d088ae80247c4b56f6e88e7595"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ece06d088ae80247c4b56f6e88e7595">&#9670;&nbsp;</a></span>USBCOMP_EP_4_ISR_ExitCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBCOMP_EP_4_ISR_ExitCallback </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>USBFS_EP_4_ISR_EntryCallback ISR hook for Joystick. </p>
<p>USBFS_EP_4_ISR_EntryCallback and USBFS_EP_5_ISR_EntryCallback are the joystick endpoint ISRs for this implementation. Whenever either are called the foreground task is freed to run, it must decide if the right stuff occured or not. If the endpoints are remapped, this routine will need to be ported even if the processor remains a PSOC-5LP. </p>

</div>
</div>
<a id="a4f17dbc784d7de1b5fd2b3ecd0ac1c05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f17dbc784d7de1b5fd2b3ecd0ac1c05">&#9670;&nbsp;</a></span>USBCOMP_EP_5_ISR_ExitCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBCOMP_EP_5_ISR_ExitCallback </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac5fe78facf2cbf49f7da99dc2ea8bfed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5fe78facf2cbf49f7da99dc2ea8bfed">&#9670;&nbsp;</a></span>UsbJoyCheck()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int UsbJoyCheck </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes USB HID buffers and interface. </p>
<p>Clears any garbage in buffers and will check to see that we've been configured.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

</div>
</div>
<a id="ad106cbebddf751373ac5880435b1dcd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad106cbebddf751373ac5880435b1dcd5">&#9670;&nbsp;</a></span>USBJoyClearBuffers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBJoyClearBuffers </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes USB HID buffers and create FreeRTOS task. </p>
<p>Clears any garbage in buffers and will check to see that we've been configured. It also creates the FreeRTOS task which runs to implement the USB HID function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

</div>
</div>
<a id="a3a24ff28204c405ea042a79964b8fa4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a24ff28204c405ea042a79964b8fa4e">&#9670;&nbsp;</a></span>USBJoyInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBJoyInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes USB HID buffers and create FreeRTOS task. </p>
<p>Clears any garbage in buffers and will check to see that we've been configured. It also creates the FreeRTOS task which runs to implement the USB HID function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

</div>
</div>
<a id="af54ffd7c83b82074578a15ee2c9e9c31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af54ffd7c83b82074578a15ee2c9e9c31">&#9670;&nbsp;</a></span>UsbJoySetOutputs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void UsbJoySetOutputs </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa6bfb0eb1ff19828b6c306d455f90e09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6bfb0eb1ff19828b6c306d455f90e09">&#9670;&nbsp;</a></span>UsbJoyTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void UsbJoyTask </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_74389ed8173ad57b461b9d623a1f3867.html">Source</a></li><li class="navelem"><a class="el" href="_u_s_b_joystick_8c.html">USBJoystick.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
