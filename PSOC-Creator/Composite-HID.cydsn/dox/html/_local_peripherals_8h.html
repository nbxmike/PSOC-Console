<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PSOC Joystick: Source/Include/LocalPeripherals.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PSOC Joystick
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_local_peripherals_8h.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">LocalPeripherals.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Constants and prototypes for the local i/o devices.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;project.h&gt;</code><br />
<code>#include &quot;<a class="el" href="_u_s_b_joystick_8h_source.html">USBJoystick.h</a>&quot;</code><br />
</div>
<p><a href="_local_peripherals_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ac32e7bee9d8c1ee37bfae3e48852535d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_local_peripherals_8h.html#ac32e7bee9d8c1ee37bfae3e48852535d">SAMPLE_PERIOD</a>&#160;&#160;&#160;5</td></tr>
<tr class="separator:ac32e7bee9d8c1ee37bfae3e48852535d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa3dd945c7bf6c879d8c0a0cac61cdc40"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_local_peripherals_8h.html#aa3dd945c7bf6c879d8c0a0cac61cdc40">LocalAnalogStartUp</a> (void)</td></tr>
<tr class="memdesc:aa3dd945c7bf6c879d8c0a0cac61cdc40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes and starts the analog sampling.  <a href="#aa3dd945c7bf6c879d8c0a0cac61cdc40">More...</a><br /></td></tr>
<tr class="separator:aa3dd945c7bf6c879d8c0a0cac61cdc40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a974704496f19a3eeb19f860043380898"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_local_peripherals_8h.html#a974704496f19a3eeb19f860043380898">LocalAnalogInit</a> (void)</td></tr>
<tr class="memdesc:a974704496f19a3eeb19f860043380898"><td class="mdescLeft">&#160;</td><td class="mdescRight">Intialization of the local inputs/outputs - one time only.  <a href="#a974704496f19a3eeb19f860043380898">More...</a><br /></td></tr>
<tr class="separator:a974704496f19a3eeb19f860043380898"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4059ac4f5aa4158e221f66980a693c9b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_local_peripherals_8h.html#a4059ac4f5aa4158e221f66980a693c9b">LocalAnalogRead</a> (void)</td></tr>
<tr class="memdesc:a4059ac4f5aa4158e221f66980a693c9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pulls samples from the ADC and puts them a buffer.  <a href="#a4059ac4f5aa4158e221f66980a693c9b">More...</a><br /></td></tr>
<tr class="separator:a4059ac4f5aa4158e221f66980a693c9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8260feb6f477581fda5d66534bf45a96"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_local_peripherals_8h.html#a8260feb6f477581fda5d66534bf45a96">LocalAnalogCopy</a> (void)</td></tr>
<tr class="memdesc:a8260feb6f477581fda5d66534bf45a96"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copies data from the working to the shared array.  <a href="#a8260feb6f477581fda5d66534bf45a96">More...</a><br /></td></tr>
<tr class="separator:a8260feb6f477581fda5d66534bf45a96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bbad3b3b18f713eca074c7fe4dfcce8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_local_peripherals_8h.html#a7bbad3b3b18f713eca074c7fe4dfcce8">LocalButtonsRead</a> (void)</td></tr>
<tr class="memdesc:a7bbad3b3b18f713eca074c7fe4dfcce8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pulls from the digital input register.  <a href="#a7bbad3b3b18f713eca074c7fe4dfcce8">More...</a><br /></td></tr>
<tr class="separator:a7bbad3b3b18f713eca074c7fe4dfcce8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea3e5f6a2d3eb7e7660f8d3304664184"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_local_peripherals_8h.html#aea3e5f6a2d3eb7e7660f8d3304664184">LocalOutputsSet</a> (void)</td></tr>
<tr class="memdesc:aea3e5f6a2d3eb7e7660f8d3304664184"><td class="mdescLeft">&#160;</td><td class="mdescRight">Programs the local indicators with USB host data.  <a href="#aea3e5f6a2d3eb7e7660f8d3304664184">More...</a><br /></td></tr>
<tr class="separator:aea3e5f6a2d3eb7e7660f8d3304664184"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac006836250558c237cbeb60393f0c1a8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_local_peripherals_8h.html#ac006836250558c237cbeb60393f0c1a8">LocalPeripheralsTask</a> (void *)</td></tr>
<tr class="memdesc:ac006836250558c237cbeb60393f0c1a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">FreeRTOS task to handle peripherals on the PSOC.  <a href="#ac006836250558c237cbeb60393f0c1a8">More...</a><br /></td></tr>
<tr class="separator:ac006836250558c237cbeb60393f0c1a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a4eb09c353837052b3cc02482aa9545fc"><td class="memItemLeft" align="right" valign="top">int16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_local_peripherals_8h.html#a4eb09c353837052b3cc02482aa9545fc">AnalogWorking</a> [<a class="el" href="_u_s_b_joystick_8h.html#a9c9958c78d8089e67e13e127325f1121">ANALOG_SIZE</a>]</td></tr>
<tr class="separator:a4eb09c353837052b3cc02482aa9545fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c7e5f213cd967bc4e587dfc966d7d25"><td class="memItemLeft" align="right" valign="top">volatile int16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_local_peripherals_8h.html#a5c7e5f213cd967bc4e587dfc966d7d25">AnalogScaled</a> [<a class="el" href="_u_s_b_joystick_8h.html#a9c9958c78d8089e67e13e127325f1121">ANALOG_SIZE</a>]</td></tr>
<tr class="separator:a5c7e5f213cd967bc4e587dfc966d7d25"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Constants and prototypes for the local i/o devices. </p>
<dl class="section author"><dt>Author</dt><dd>Mike McCormack (nbxmike) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>8/OCT/2018 </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ac32e7bee9d8c1ee37bfae3e48852535d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac32e7bee9d8c1ee37bfae3e48852535d">&#9670;&nbsp;</a></span>SAMPLE_PERIOD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SAMPLE_PERIOD&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a8260feb6f477581fda5d66534bf45a96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8260feb6f477581fda5d66534bf45a96">&#9670;&nbsp;</a></span>LocalAnalogCopy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LocalAnalogCopy </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copies data from the working to the shared array. </p>
<p>This is a very specific copy routine moved from its previous function to a seperate function to force the compiler to not optimize it in a way that would be problematic.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

</div>
</div>
<a id="a974704496f19a3eeb19f860043380898"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a974704496f19a3eeb19f860043380898">&#9670;&nbsp;</a></span>LocalAnalogInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LocalAnalogInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Intialization of the local inputs/outputs - one time only. </p>
<p>Sets up the software mainly, the hardware is largely configured in the PSOC TopDesign.cysch file. This is intended to only be called one time and repeat calls could be problematic. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>

</div>
</div>
<a id="a4059ac4f5aa4158e221f66980a693c9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4059ac4f5aa4158e221f66980a693c9b">&#9670;&nbsp;</a></span>LocalAnalogRead()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LocalAnalogRead </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pulls samples from the ADC and puts them a buffer. </p>
<p>This will pull data from the ADC, scales it and centers it about zero in an integer array. To ensure that another task cannot get half converted data, the shared buffer is not updated here but in another procedure and and that is not called until the data is has been processed. Yes, some other task could get data from two sample periods, but as we are talking with human interoperations, it really does not matter.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

</div>
</div>
<a id="aa3dd945c7bf6c879d8c0a0cac61cdc40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3dd945c7bf6c879d8c0a0cac61cdc40">&#9670;&nbsp;</a></span>LocalAnalogStartUp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LocalAnalogStartUp </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes and starts the analog sampling. </p>
<p>Will setup the ADC, though it is already set in the schematic, an then starts the converter on a continous loog of samples</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

</div>
</div>
<a id="a7bbad3b3b18f713eca074c7fe4dfcce8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bbad3b3b18f713eca074c7fe4dfcce8">&#9670;&nbsp;</a></span>LocalButtonsRead()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LocalButtonsRead </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pulls from the digital input register. </p>
<p>This will pull data from the the digital registers that are connected to buttons and switches. Yes, some other task could get data from two sample periods, but as we are talking with human interoperations, it really does not matter.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

</div>
</div>
<a id="aea3e5f6a2d3eb7e7660f8d3304664184"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea3e5f6a2d3eb7e7660f8d3304664184">&#9670;&nbsp;</a></span>LocalOutputsSet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LocalOutputsSet </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Programs the local indicators with USB host data. </p>
<p>The USB host sends the data that will get copied to local indicators register.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

</div>
</div>
<a id="ac006836250558c237cbeb60393f0c1a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac006836250558c237cbeb60393f0c1a8">&#9670;&nbsp;</a></span>LocalPeripheralsTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LocalPeripheralsTask </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>FreeRTOS task to handle peripherals on the PSOC. </p>
<p>The standard FreeRTOS task, set things up then loop forever.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a5c7e5f213cd967bc4e587dfc966d7d25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c7e5f213cd967bc4e587dfc966d7d25">&#9670;&nbsp;</a></span>AnalogScaled</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile int16 AnalogScaled[<a class="el" href="_u_s_b_joystick_8h.html#a9c9958c78d8089e67e13e127325f1121">ANALOG_SIZE</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4eb09c353837052b3cc02482aa9545fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4eb09c353837052b3cc02482aa9545fc">&#9670;&nbsp;</a></span>AnalogWorking</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16 AnalogWorking[<a class="el" href="_u_s_b_joystick_8h.html#a9c9958c78d8089e67e13e127325f1121">ANALOG_SIZE</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_74389ed8173ad57b461b9d623a1f3867.html">Source</a></li><li class="navelem"><a class="el" href="dir_855050ae6c7dc05f24a2b806a4f40243.html">Include</a></li><li class="navelem"><a class="el" href="_local_peripherals_8h.html">LocalPeripherals.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
